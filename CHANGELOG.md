# Change Log

## [v1.1.0-alpha-7](https://github.com/zero-os/0-Disk/tree/1.1.0-alpha-7) (unreleased)
[Full Changelog](https://github.com/zero-os/0-Disk/compare/v1.1.0-alpha-5...1.1.0-alpha-7)

**Closed issues:**

- fix race warning in vdisk\_complete.go [\#379](https://github.com/zero-os/0-Disk/issues/379)
- take a hard look at the LBA code and redesign where needed [\#376](https://github.com/zero-os/0-Disk/issues/376)
- make testrace is running without -race flag [\#373](https://github.com/zero-os/0-Disk/issues/373)
- notify 0-orchestrator when etcd \(config\) cluster is down [\#370](https://github.com/zero-os/0-Disk/issues/370)
- Nbd server failed to read template data \(invalid configuration\) [\#364](https://github.com/zero-os/0-Disk/issues/364)
- notify 0-Orchestrator when a hot-reloaded config is invalid [\#363](https://github.com/zero-os/0-Disk/issues/363)
- fix stub-based config unit tests [\#361](https://github.com/zero-os/0-Disk/issues/361)
- additional fields for tlog config [\#360](https://github.com/zero-os/0-Disk/issues/360)
- List and document all locations which require communication with 0-Orchestrator [\#359](https://github.com/zero-os/0-Disk/issues/359)
- refactor core storage code into public centralized module [\#350](https://github.com/zero-os/0-Disk/issues/350)
- add \(meta\)data key rename tool [\#345](https://github.com/zero-os/0-Disk/issues/345)
- TestForceFlushAtSeq times out in Travis's `make testgo` [\#344](https://github.com/zero-os/0-Disk/issues/344)
- `make testcodegen` failed but reported as passed on travis [\#343](https://github.com/zero-os/0-Disk/issues/343)
- nbdserver : move sigterm handler to nbd.Backend [\#339](https://github.com/zero-os/0-Disk/issues/339)
- broken TestSlaveSyncRealRead unit test [\#331](https://github.com/zero-os/0-Disk/issues/331)
- exit nbdserver gracefully upon SIGTERM [\#323](https://github.com/zero-os/0-Disk/issues/323)
- tlogserver : handle db down in smarter way \(erasure coding way\) [\#321](https://github.com/zero-os/0-Disk/issues/321)
- remove usage of config files, go to etcd [\#316](https://github.com/zero-os/0-Disk/issues/316)
- broken tlogclient multiple server unit test [\#310](https://github.com/zero-os/0-Disk/issues/310)
- move specs/docs which are now in readme's to the docs folder [\#309](https://github.com/zero-os/0-Disk/issues/309)
- Add For-Orchestrator-Failure \(stderr\) logger [\#300](https://github.com/zero-os/0-Disk/issues/300)
- vdisk restore fails but returns success [\#288](https://github.com/zero-os/0-Disk/issues/288)

**Merged pull requests:**

- Adds 0-log to Config [\#382](https://github.com/zero-os/0-Disk/pull/382) ([chrisvdg](https://github.com/chrisvdg))
- fix race warnings and their origins [\#380](https://github.com/zero-os/0-Disk/pull/380) ([GlenDC](https://github.com/GlenDC))
- fix StorageClusterConfig configuration in docs/config.md [\#377](https://github.com/zero-os/0-Disk/pull/377) ([khaledkbadr](https://github.com/khaledkbadr))
- Fix header links in docs/config.md [\#372](https://github.com/zero-os/0-Disk/pull/372) ([khaledkbadr](https://github.com/khaledkbadr))
- fix deadlock issue in watch config unit tests [\#366](https://github.com/zero-os/0-Disk/pull/366) ([GlenDC](https://github.com/GlenDC))
- isolate BlockStorage and bring order to nbd module [\#356](https://github.com/zero-os/0-Disk/pull/356) ([GlenDC](https://github.com/GlenDC))
- remote backendStorage.Merge interface method [\#348](https://github.com/zero-os/0-Disk/pull/348) ([GlenDC](https://github.com/GlenDC))
- vendor+install missing capnpc-go plugin [\#347](https://github.com/zero-os/0-Disk/pull/347) ([GlenDC](https://github.com/GlenDC))
- add tool to migrate legacy keys to new format [\#346](https://github.com/zero-os/0-Disk/pull/346) ([GlenDC](https://github.com/GlenDC))
- add missing docs and improve existing docs [\#342](https://github.com/zero-os/0-Disk/pull/342) ([GlenDC](https://github.com/GlenDC))
- tlogclient : fix race condition when waiting for sync.Cond variable. [\#341](https://github.com/zero-os/0-Disk/pull/341) ([iwanbk](https://github.com/iwanbk))
- move nbd sigterm handling to backend [\#340](https://github.com/zero-os/0-Disk/pull/340) ([GlenDC](https://github.com/GlenDC))
- tlogclient : fix first sequence used to reconnect. [\#338](https://github.com/zero-os/0-Disk/pull/338) ([iwanbk](https://github.com/iwanbk))
- update dependencies [\#333](https://github.com/zero-os/0-Disk/pull/333) ([GlenDC](https://github.com/GlenDC))
- Adds etcdconfig [\#330](https://github.com/zero-os/0-Disk/pull/330) ([chrisvdg](https://github.com/chrisvdg))

## [v1.1.0-alpha-5](https://github.com/zero-os/0-Disk/tree/v1.1.0-alpha-5) (2017-07-14)
[Full Changelog](https://github.com/zero-os/0-Disk/compare/v1.1.0-alpha-4...v1.1.0-alpha-5)

**Closed issues:**

- tlogserver not building on MacOS in master [\#328](https://github.com/zero-os/0-Disk/issues/328)
- Fix broken zeroctl list vdisks command \(remove prefixes\) [\#326](https://github.com/zero-os/0-Disk/issues/326)
- tlogserver : remove hot reload support [\#315](https://github.com/zero-os/0-Disk/issues/315)
- multiple tlog : logs might be stored twice on failover [\#314](https://github.com/zero-os/0-Disk/issues/314)
- spread metadata of tlogserver's slave syncer [\#305](https://github.com/zero-os/0-Disk/issues/305)
- Space-Optimized Storage Type \(deduped/nondeduped hybrid\) [\#298](https://github.com/zero-os/0-Disk/issues/298)
- config hot reload data race [\#292](https://github.com/zero-os/0-Disk/issues/292)
- tlog: sending SIGHUP kills the server [\#287](https://github.com/zero-os/0-Disk/issues/287)
- tlog: stop main listener and all vdisk goroutines with contex.CancelFunc [\#283](https://github.com/zero-os/0-Disk/issues/283)
- Configure multiple Tlog servers per NBD server [\#279](https://github.com/zero-os/0-Disk/issues/279)
- nbdserver : switch to ardb slave [\#276](https://github.com/zero-os/0-Disk/issues/276)
- TestResetFirstSequence sometimes seem to deadlock [\#275](https://github.com/zero-os/0-Disk/issues/275)
- tlogclient : add resend and reconnect to ForceFlushAtSeq [\#256](https://github.com/zero-os/0-Disk/issues/256)
- nbdserver vdisk : try to recover when tlog connection failed [\#229](https://github.com/zero-os/0-Disk/issues/229)
-  multicasting to more than 1 tlog server [\#198](https://github.com/zero-os/0-Disk/issues/198)
- Failover to slave ardb's if the main ardb is failing [\#38](https://github.com/zero-os/0-Disk/issues/38)

**Merged pull requests:**

- nbdserver sigterm handler. [\#337](https://github.com/zero-os/0-Disk/pull/337) ([iwanbk](https://github.com/iwanbk))
- Revert "Implements TrimAt" [\#329](https://github.com/zero-os/0-Disk/pull/329) ([iwanbk](https://github.com/iwanbk))
- Fix usage of parent context. [\#327](https://github.com/zero-os/0-Disk/pull/327) ([iwanbk](https://github.com/iwanbk))
- Fix tlog test multipleserver [\#320](https://github.com/zero-os/0-Disk/pull/320) ([iwanbk](https://github.com/iwanbk))
- improve code base and inline docs [\#318](https://github.com/zero-os/0-Disk/pull/318) ([GlenDC](https://github.com/GlenDC))
- add semideduped storage type [\#312](https://github.com/zero-os/0-Disk/pull/312) ([GlenDC](https://github.com/GlenDC))
- Implements TrimAt [\#307](https://github.com/zero-os/0-Disk/pull/307) ([chrisvdg](https://github.com/chrisvdg))
- Feat slavesync hot reload [\#295](https://github.com/zero-os/0-Disk/pull/295) ([iwanbk](https://github.com/iwanbk))
- Multiple-tlog support improvements [\#294](https://github.com/zero-os/0-Disk/pull/294) ([iwanbk](https://github.com/iwanbk))
- Fix hot reload data race. [\#293](https://github.com/zero-os/0-Disk/pull/293) ([iwanbk](https://github.com/iwanbk))
- tlogserver : add context variable to vdisk. [\#291](https://github.com/zero-os/0-Disk/pull/291) ([iwanbk](https://github.com/iwanbk))
- Tlogclient multiple server [\#290](https://github.com/zero-os/0-Disk/pull/290) ([iwanbk](https://github.com/iwanbk))
- Fix tlog hotreload : [\#289](https://github.com/zero-os/0-Disk/pull/289) ([iwanbk](https://github.com/iwanbk))
- Force flush resend [\#285](https://github.com/zero-os/0-Disk/pull/285) ([iwanbk](https://github.com/iwanbk))
- Reliable slave sync [\#282](https://github.com/zero-os/0-Disk/pull/282) ([iwanbk](https://github.com/iwanbk))

## [v1.1.0-alpha-4](https://github.com/zero-os/0-Disk/tree/v1.1.0-alpha-4) (2017-06-16)
[Full Changelog](https://github.com/zero-os/0-Disk/compare/v1.1.0-alpha-3...v1.1.0-alpha-4)

**Closed issues:**

- support \(optional\) `rootVdiskID` in \(nondeduped\) vdisk config [\#271](https://github.com/zero-os/0-Disk/issues/271)
- tlogclient \(in tlogStorage\) fails at master \(c56f16a\): max send retry reached [\#265](https://github.com/zero-os/0-Disk/issues/265)
- TestReconnectFromRead test failed \(once\) [\#260](https://github.com/zero-os/0-Disk/issues/260)
- tlogserver configuration is not documented [\#259](https://github.com/zero-os/0-Disk/issues/259)
- nbdserver tlogStorage : call Flush more often and or faster [\#258](https://github.com/zero-os/0-Disk/issues/258)
- TestForceFlush got stuck in a travis build [\#252](https://github.com/zero-os/0-Disk/issues/252)
- tlogclient : handle slow user's receiver [\#250](https://github.com/zero-os/0-Disk/issues/250)
- nbdserver freeze when converting big image [\#247](https://github.com/zero-os/0-Disk/issues/247)
- add zerodisk.CurrentVersion to nbdserver+tlogserver usage message [\#244](https://github.com/zero-os/0-Disk/issues/244)
- nbdserver does hangup when sending sighub if there are no active clients [\#243](https://github.com/zero-os/0-Disk/issues/243)
- `go test - race` free nbdserver  [\#239](https://github.com/zero-os/0-Disk/issues/239)
- support optional time flag in `zeroctl restore vdisk` command [\#237](https://github.com/zero-os/0-Disk/issues/237)
- add tlog support for db vdisk type [\#236](https://github.com/zero-os/0-Disk/issues/236)
- tlog client/server hashing issue [\#232](https://github.com/zero-os/0-Disk/issues/232)
- TestTlogStorageDeadlockWithDeduped is unstable [\#231](https://github.com/zero-os/0-Disk/issues/231)
- Add optional sequence param to tlog ForceFlush [\#228](https://github.com/zero-os/0-Disk/issues/228)
- nbdserer tlogStorage.Flush : fix the ForceFlush call [\#227](https://github.com/zero-os/0-Disk/issues/227)
- tlogclient : Filter out io.EOF error  [\#226](https://github.com/zero-os/0-Disk/issues/226)
- Non-deduped-from-template disks [\#223](https://github.com/zero-os/0-Disk/issues/223)
- Add and support "tmp" vdisk type [\#217](https://github.com/zero-os/0-Disk/issues/217)
- Make MetadataStorage optional in the Config [\#216](https://github.com/zero-os/0-Disk/issues/216)
- tlog : optimize blockbuffer package [\#214](https://github.com/zero-os/0-Disk/issues/214)
- rename repo and relevant code/dependencies from blockstor to zerodisk [\#212](https://github.com/zero-os/0-Disk/issues/212)
- zeroctl: delete legacy copy/delete nondeduped/deduped commands [\#205](https://github.com/zero-os/0-Disk/issues/205)
- tlogserver: support SIGHUP reloading for config hot reloading [\#177](https://github.com/zero-os/0-Disk/issues/177)

**Merged pull requests:**

- nbdserver : failover to slave. [\#278](https://github.com/zero-os/0-Disk/pull/278) ([iwanbk](https://github.com/iwanbk))
- Slave sync command [\#277](https://github.com/zero-os/0-Disk/pull/277) ([iwanbk](https://github.com/iwanbk))
- Replay with timestamp [\#274](https://github.com/zero-os/0-Disk/pull/274) ([iwanbk](https://github.com/iwanbk))
- Basic Tlog slave syncer [\#270](https://github.com/zero-os/0-Disk/pull/270) ([iwanbk](https://github.com/iwanbk))
- tlog : Add replay method to tlog decoder. [\#267](https://github.com/zero-os/0-Disk/pull/267) ([iwanbk](https://github.com/iwanbk))
- Fix tlog reconnect and nbdserver error handling [\#266](https://github.com/zero-os/0-Disk/pull/266) ([iwanbk](https://github.com/iwanbk))
- Remove sock read deadline [\#264](https://github.com/zero-os/0-Disk/pull/264) ([iwanbk](https://github.com/iwanbk))
- Generic reconnect [\#263](https://github.com/zero-os/0-Disk/pull/263) ([iwanbk](https://github.com/iwanbk))
- Make the tlogclient's blockbuffer scalable. [\#262](https://github.com/zero-os/0-Disk/pull/262) ([iwanbk](https://github.com/iwanbk))
- Improve config and docs [\#261](https://github.com/zero-os/0-Disk/pull/261) ([GlenDC](https://github.com/GlenDC))
- Remove ForceFlush as it is not used anymore. [\#257](https://github.com/zero-os/0-Disk/pull/257) ([iwanbk](https://github.com/iwanbk))
- integrate hotreloader into tlog's redis pool [\#255](https://github.com/zero-os/0-Disk/pull/255) ([GlenDC](https://github.com/GlenDC))
- add config hotreloader and use it for nbdserver [\#253](https://github.com/zero-os/0-Disk/pull/253) ([GlenDC](https://github.com/GlenDC))
- Fix nbdserver freeze [\#249](https://github.com/zero-os/0-Disk/pull/249) ([iwanbk](https://github.com/iwanbk))
- Fix TestReconnectFromSend, make sure it connects from sender. [\#248](https://github.com/zero-os/0-Disk/pull/248) ([iwanbk](https://github.com/iwanbk))
- Tlogclient reconnect from read [\#246](https://github.com/zero-os/0-Disk/pull/246) ([iwanbk](https://github.com/iwanbk))
- support missing vdisk properties [\#245](https://github.com/zero-os/0-Disk/pull/245) ([GlenDC](https://github.com/GlenDC))
- Protect lba Get and Set with lock [\#242](https://github.com/zero-os/0-Disk/pull/242) ([iwanbk](https://github.com/iwanbk))
- nbdserver tlogStorage : `go test -race` fixes [\#240](https://github.com/zero-os/0-Disk/pull/240) ([iwanbk](https://github.com/iwanbk))
- nbdserver tlogStorage flush rework [\#238](https://github.com/zero-os/0-Disk/pull/238) ([iwanbk](https://github.com/iwanbk))
- force flush code cleanup [\#235](https://github.com/zero-os/0-Disk/pull/235) ([iwanbk](https://github.com/iwanbk))
- Fix force flush race [\#234](https://github.com/zero-os/0-Disk/pull/234) ([iwanbk](https://github.com/iwanbk))

## [v1.1.0-alpha-3](https://github.com/zero-os/0-Disk/tree/v1.1.0-alpha-3) (2017-06-02)
[Full Changelog](https://github.com/zero-os/0-Disk/compare/v1.1.0-alpha...v1.1.0-alpha-3)

**Closed issues:**

- add ability for nbdserver to reset vdisk expected sequence [\#218](https://github.com/zero-os/0-Disk/issues/218)
- nbdserver seems to use only the first half of the ardb's in its config file [\#215](https://github.com/zero-os/0-Disk/issues/215)
- g8stor: replace copy/delete commands using config file support [\#204](https://github.com/zero-os/0-Disk/issues/204)
- tlog response decoding : capnp: address out of bounds [\#200](https://github.com/zero-os/0-Disk/issues/200)
- reconnect test sometime failed in travis [\#199](https://github.com/zero-os/0-Disk/issues/199)
- tlog : newFlusher is called at each handshake [\#193](https://github.com/zero-os/0-Disk/issues/193)
- Config-reloading on SIGHUP is not documented properly [\#191](https://github.com/zero-os/0-Disk/issues/191)
- add command to force tlog flush [\#188](https://github.com/zero-os/0-Disk/issues/188)
- tlog : add redundancy to the metadata [\#183](https://github.com/zero-os/0-Disk/issues/183)
- provide tlog README documentation [\#180](https://github.com/zero-os/0-Disk/issues/180)
- tlogclient can't finish work at end of nbdserver's backend life cycle [\#178](https://github.com/zero-os/0-Disk/issues/178)
- tlog : vdisk failed to be restarted [\#176](https://github.com/zero-os/0-Disk/issues/176)
- Validate nbdserver config file before starting the nbdserver [\#175](https://github.com/zero-os/0-Disk/issues/175)
-  tlog: handshake failed: client version is not supported by this server [\#174](https://github.com/zero-os/0-Disk/issues/174)
- Add g8stor list  [\#173](https://github.com/zero-os/0-Disk/issues/173)
- Logger always declares itself as the caller [\#171](https://github.com/zero-os/0-Disk/issues/171)
- tlogserver: get the ardb connectionstrings from a config.yml file [\#170](https://github.com/zero-os/0-Disk/issues/170)
- tlog - nbd : tlog might expect wrong first sequence [\#166](https://github.com/zero-os/0-Disk/issues/166)
- Remove RecvOne method from the TlogClient public API [\#165](https://github.com/zero-os/0-Disk/issues/165)
- Add support for db index in nbdserver [\#163](https://github.com/zero-os/0-Disk/issues/163)
- re-send the tlog if doesn't get response or response says error [\#162](https://github.com/zero-os/0-Disk/issues/162)
- update all dependencies in vendor/ [\#158](https://github.com/zero-os/0-Disk/issues/158)
- add automated test for the tlog replay logic [\#157](https://github.com/zero-os/0-Disk/issues/157)
- nbdserver with tlog : only Flush the operation after it get Flushed by tlog [\#153](https://github.com/zero-os/0-Disk/issues/153)
- merge develop into master [\#150](https://github.com/zero-os/0-Disk/issues/150)
- merge master into develop and adapt to the changes [\#149](https://github.com/zero-os/0-Disk/issues/149)
- capnp : encode to io.Writer and decode from io.Reader directly [\#146](https://github.com/zero-os/0-Disk/issues/146)
- provide log.Errorf [\#145](https://github.com/zero-os/0-Disk/issues/145)
- tlog server : add support for unordered & duplicated message [\#143](https://github.com/zero-os/0-Disk/issues/143)
- tlog : remove vdisk ID from TlogBlock's field [\#141](https://github.com/zero-os/0-Disk/issues/141)
- g8stor cli tool suite [\#138](https://github.com/zero-os/0-Disk/issues/138)
- Fua logic might cause flushing before the last write. [\#137](https://github.com/zero-os/0-Disk/issues/137)
- Move the g8os/gonbdserver code in this repository [\#136](https://github.com/zero-os/0-Disk/issues/136)
- Incomplete writes [\#135](https://github.com/zero-os/0-Disk/issues/135)
- tlog response sequences always empty [\#134](https://github.com/zero-os/0-Disk/issues/134)
- tlog - ndb : data plane optimization [\#132](https://github.com/zero-os/0-Disk/issues/132)
- tlog server : proper handle of failed flush [\#131](https://github.com/zero-os/0-Disk/issues/131)
- tlog response write seems too slow [\#130](https://github.com/zero-os/0-Disk/issues/130)
- tlog - nbdserver : fix one connection one vdisk assumption. [\#129](https://github.com/zero-os/0-Disk/issues/129)
- improve tlog client error handling [\#126](https://github.com/zero-os/0-Disk/issues/126)
- tlog : investigate why the faster isa-l doesn't give performance boost [\#125](https://github.com/zero-os/0-Disk/issues/125)
- use a storageCluster as root/fallback storage [\#123](https://github.com/zero-os/0-Disk/issues/123)
- update documentation to reflect yaml config update [\#120](https://github.com/zero-os/0-Disk/issues/120)
- integrate yaml config into tlogreplay tool [\#119](https://github.com/zero-os/0-Disk/issues/119)
- tlogreplay : fix WriteZeroesAt offset/length [\#118](https://github.com/zero-os/0-Disk/issues/118)
- tlog capnp optimization  [\#117](https://github.com/zero-os/0-Disk/issues/117)
- tlog : redis pool package [\#112](https://github.com/zero-os/0-Disk/issues/112)
- Replace the gridapi with a configfile [\#111](https://github.com/zero-os/0-Disk/issues/111)
- tlog : do the flush asynchronously [\#106](https://github.com/zero-os/0-Disk/issues/106)
- tlog : send notification when flush by timeout happens [\#105](https://github.com/zero-os/0-Disk/issues/105)
- tlog : change prev hash value of the first aggregation [\#104](https://github.com/zero-os/0-Disk/issues/104)
- improve \(verbose\) logging [\#102](https://github.com/zero-os/0-Disk/issues/102)
- tlog : add erasure decoding to tlog decoder [\#96](https://github.com/zero-os/0-Disk/issues/96)
- Docs to try/use/test the ndbserver [\#94](https://github.com/zero-os/0-Disk/issues/94)
- tlog : use same redis package as nbdserver [\#92](https://github.com/zero-os/0-Disk/issues/92)
- Nbdserver -rootardb flag seems to block the server [\#89](https://github.com/zero-os/0-Disk/issues/89)
- Tool to recreate a vdisk from the tlogs [\#86](https://github.com/zero-os/0-Disk/issues/86)
- tlog : automatic test [\#83](https://github.com/zero-os/0-Disk/issues/83)
- tlog : get\_last\_data example is not working anymore [\#81](https://github.com/zero-os/0-Disk/issues/81)
- make async nbdserver tests 100% reliable [\#80](https://github.com/zero-os/0-Disk/issues/80)
- tlog: make cgo dependency in tlogclient examples optional [\#78](https://github.com/zero-os/0-Disk/issues/78)
- tlog: replace volume with vdisk [\#76](https://github.com/zero-os/0-Disk/issues/76)
- tlog : support for dynamic tlog block length  [\#74](https://github.com/zero-os/0-Disk/issues/74)
- tlog : move funcs in get\_last\_data to tlogclient package [\#73](https://github.com/zero-os/0-Disk/issues/73)
- make tlog client pure-go by default [\#70](https://github.com/zero-os/0-Disk/issues/70)
- tlog: move client into blockstor and move server [\#69](https://github.com/zero-os/0-Disk/issues/69)
- tlogserver: replace isa-l with go AES and blake2 [\#67](https://github.com/zero-os/0-Disk/issues/67)
- add option copyvdisk to do combination of api and direct [\#65](https://github.com/zero-os/0-Disk/issues/65)
- fix broken Travis CI: non-deterministic order [\#63](https://github.com/zero-os/0-Disk/issues/63)
- /volumes changed to /vdisks in the gridapi [\#60](https://github.com/zero-os/0-Disk/issues/60)
- copyvolume: Possibility to provide storageclusternames instead of fetching them from the api [\#59](https://github.com/zero-os/0-Disk/issues/59)
- Remote root storagecluster support [\#57](https://github.com/zero-os/0-Disk/issues/57)
- Commandline utility to copy a deduped volume. [\#56](https://github.com/zero-os/0-Disk/issues/56)
- Remove Go 1.6 from travis build [\#55](https://github.com/zero-os/0-Disk/issues/55)
- When getting size from api the correct unit is gb not bytes [\#53](https://github.com/zero-os/0-Disk/issues/53)
- Echo commandline parameters [\#52](https://github.com/zero-os/0-Disk/issues/52)
- tlog server implementation in go [\#49](https://github.com/zero-os/0-Disk/issues/49)
- Redis STUB Set support [\#47](https://github.com/zero-os/0-Disk/issues/47)
- Better redis compliancy for the inmemory stub. [\#46](https://github.com/zero-os/0-Disk/issues/46)
- Redis STUB type validation [\#45](https://github.com/zero-os/0-Disk/issues/45)
- Keep track of volumes referencing the content and clean up if 0 [\#42](https://github.com/zero-os/0-Disk/issues/42)
- Integrate the tlog server in the nbdserver [\#40](https://github.com/zero-os/0-Disk/issues/40)
- Reload the storagecluster configuration on a SIGHUP [\#39](https://github.com/zero-os/0-Disk/issues/39)

**Merged pull requests:**

- Force flush seq [\#233](https://github.com/zero-os/0-Disk/pull/233) ([iwanbk](https://github.com/iwanbk))
- Add missed lock to tlogclient.ForceFlush [\#224](https://github.com/zero-os/0-Disk/pull/224) ([iwanbk](https://github.com/iwanbk))
- Tlog reset first seq [\#219](https://github.com/zero-os/0-Disk/pull/219) ([iwanbk](https://github.com/iwanbk))
- Force flush [\#213](https://github.com/zero-os/0-Disk/pull/213) ([iwanbk](https://github.com/iwanbk))
- Remove unused connectionConfig struct. [\#211](https://github.com/zero-os/0-Disk/pull/211) ([iwanbk](https://github.com/iwanbk))
- Use static vdisk segmentBuf instead of dynamic one. [\#210](https://github.com/zero-os/0-Disk/pull/210) ([iwanbk](https://github.com/iwanbk))
- add tlogstorage implementation and tests [\#209](https://github.com/zero-os/0-Disk/pull/209) ([GlenDC](https://github.com/GlenDC))
- rename TlogBlock.lba to TlogBlock.offset [\#208](https://github.com/zero-os/0-Disk/pull/208) ([GlenDC](https://github.com/GlenDC))
- tlog client : protect whole client.connect. [\#203](https://github.com/zero-os/0-Disk/pull/203) ([iwanbk](https://github.com/iwanbk))
- Tlog readme [\#202](https://github.com/zero-os/0-Disk/pull/202) ([iwanbk](https://github.com/iwanbk))
- Remove `chanSize` param from tlogclient.Recv API. [\#201](https://github.com/zero-os/0-Disk/pull/201) ([iwanbk](https://github.com/iwanbk))
- tlog : Test resend in case of timeout [\#197](https://github.com/zero-os/0-Disk/pull/197) ([iwanbk](https://github.com/iwanbk))
- Add simple automatic client reconnect test. [\#196](https://github.com/zero-os/0-Disk/pull/196) ([iwanbk](https://github.com/iwanbk))
- add g8stor list vdisks command [\#195](https://github.com/zero-os/0-Disk/pull/195) ([GlenDC](https://github.com/GlenDC))
- only create flusher when vdisk is to be created [\#194](https://github.com/zero-os/0-Disk/pull/194) ([GlenDC](https://github.com/GlenDC))
- Tlog metadata redundancy [\#189](https://github.com/zero-os/0-Disk/pull/189) ([iwanbk](https://github.com/iwanbk))
- make travis tests parallel, using jobs [\#187](https://github.com/zero-os/0-Disk/pull/187) ([GlenDC](https://github.com/GlenDC))
- refactor tlogrplay and add end-to-end test [\#186](https://github.com/zero-os/0-Disk/pull/186) ([GlenDC](https://github.com/GlenDC))
- tlog client : fix reconnect in regard to handshaking [\#185](https://github.com/zero-os/0-Disk/pull/185) ([iwanbk](https://github.com/iwanbk))
- tlog : make RecvOne to private func and improve the example. [\#184](https://github.com/zero-os/0-Disk/pull/184) ([iwanbk](https://github.com/iwanbk))
- Fix incorect get last hash in tlog server during vdisk startup. [\#182](https://github.com/zero-os/0-Disk/pull/182) ([iwanbk](https://github.com/iwanbk))
- Tlogclient retry on timeout/error [\#181](https://github.com/zero-os/0-Disk/pull/181) ([iwanbk](https://github.com/iwanbk))
- suport yaml config in tlog [\#179](https://github.com/zero-os/0-Disk/pull/179) ([GlenDC](https://github.com/GlenDC))
- Strip bins in Makefile [\#172](https://github.com/zero-os/0-Disk/pull/172) ([grimpy](https://github.com/grimpy))
- fix \#163: support db indices for ardbs  [\#169](https://github.com/zero-os/0-Disk/pull/169) ([GlenDC](https://github.com/GlenDC))
- support unordered tlog message from the start [\#168](https://github.com/zero-os/0-Disk/pull/168) ([GlenDC](https://github.com/GlenDC))
- Tlog server : add support for unordered & duplicated messages [\#161](https://github.com/zero-os/0-Disk/pull/161) ([iwanbk](https://github.com/iwanbk))
- use NilHash as first aggr PrevHash value [\#160](https://github.com/zero-os/0-Disk/pull/160) ([GlenDC](https://github.com/GlenDC))
- remove vdiskID from tlogblock [\#159](https://github.com/zero-os/0-Disk/pull/159) ([GlenDC](https://github.com/GlenDC))
- tlog client : recreate tcp connection if broken. [\#156](https://github.com/zero-os/0-Disk/pull/156) ([iwanbk](https://github.com/iwanbk))
- Capnp direct write [\#155](https://github.com/zero-os/0-Disk/pull/155) ([iwanbk](https://github.com/iwanbk))
- tlog : store last hash array instead of single last hash. [\#154](https://github.com/zero-os/0-Disk/pull/154) ([iwanbk](https://github.com/iwanbk))
- merge develop into master [\#152](https://github.com/zero-os/0-Disk/pull/152) ([GlenDC](https://github.com/GlenDC))
- integrate log15 as the new internal logger [\#151](https://github.com/zero-os/0-Disk/pull/151) ([GlenDC](https://github.com/GlenDC))
- move remaining nbdserver/docs to docs/nbd [\#148](https://github.com/zero-os/0-Disk/pull/148) ([GlenDC](https://github.com/GlenDC))
- tlog : retry flush if failed. [\#144](https://github.com/zero-os/0-Disk/pull/144) ([iwanbk](https://github.com/iwanbk))
- Fix capnp prefix [\#140](https://github.com/zero-os/0-Disk/pull/140) ([iwanbk](https://github.com/iwanbk))
- add g8stor tool suite \(replaces copyvdisk cli tool\) [\#139](https://github.com/zero-os/0-Disk/pull/139) ([GlenDC](https://github.com/GlenDC))
- Tlog capnp improvement [\#133](https://github.com/zero-os/0-Disk/pull/133) ([iwanbk](https://github.com/iwanbk))
- Tlog async flush [\#127](https://github.com/zero-os/0-Disk/pull/127) ([iwanbk](https://github.com/iwanbk))
- tlog : improve TlogBlock copy. [\#124](https://github.com/zero-os/0-Disk/pull/124) ([iwanbk](https://github.com/iwanbk))
- turn vdiskID into a positional argument [\#122](https://github.com/zero-os/0-Disk/pull/122) ([GlenDC](https://github.com/GlenDC))
- Add makefile to build all bins [\#121](https://github.com/zero-os/0-Disk/pull/121) ([grimpy](https://github.com/grimpy))
- Make tlog optional for nbdserver. [\#116](https://github.com/zero-os/0-Disk/pull/116) ([iwanbk](https://github.com/iwanbk))
- Tlogreplay : Tool to recreate a vdisk from the tlogs [\#115](https://github.com/zero-os/0-Disk/pull/115) ([iwanbk](https://github.com/iwanbk))
- remove deprecated copyvdisk lua script [\#114](https://github.com/zero-os/0-Disk/pull/114) ([GlenDC](https://github.com/GlenDC))
- Replace gridapi with yaml config [\#113](https://github.com/zero-os/0-Disk/pull/113) ([GlenDC](https://github.com/GlenDC))
- Move tlogserver main file dir from cmd to tlog/tlogserver. [\#110](https://github.com/zero-os/0-Disk/pull/110) ([iwanbk](https://github.com/iwanbk))
- tlog : make the default config to not return random values. [\#108](https://github.com/zero-os/0-Disk/pull/108) ([iwanbk](https://github.com/iwanbk))
- initial integration of tlogserver into nbdserver [\#107](https://github.com/zero-os/0-Disk/pull/107) ([GlenDC](https://github.com/GlenDC))
- Addresess remarks of PR \#100 [\#101](https://github.com/zero-os/0-Disk/pull/101) ([grimpy](https://github.com/grimpy))
- Add a flag to choose vdisk size [\#100](https://github.com/zero-os/0-Disk/pull/100) ([grimpy](https://github.com/grimpy))
- tlog : remove libsnappy-dev and isa-l crypto from dependencies. [\#99](https://github.com/zero-os/0-Disk/pull/99) ([iwanbk](https://github.com/iwanbk))
- Tlog end to end test [\#98](https://github.com/zero-os/0-Disk/pull/98) ([iwanbk](https://github.com/iwanbk))
- Add erasure decoding to tlog decoder. [\#97](https://github.com/zero-os/0-Disk/pull/97) ([iwanbk](https://github.com/iwanbk))
- add verbose logging and ledisdb to tlogserver [\#95](https://github.com/zero-os/0-Disk/pull/95) ([GlenDC](https://github.com/GlenDC))
- add tlog server and client [\#93](https://github.com/zero-os/0-Disk/pull/93) ([iwanbk](https://github.com/iwanbk))
- fix deduped \(redis.Conn.Close\) deadlock issues [\#90](https://github.com/zero-os/0-Disk/pull/90) ([GlenDC](https://github.com/GlenDC))
- Update README.md [\#87](https://github.com/zero-os/0-Disk/pull/87) ([FastGeert](https://github.com/FastGeert))
- Tlog decoder. [\#85](https://github.com/zero-os/0-Disk/pull/85) ([iwanbk](https://github.com/iwanbk))
- Fix tlog get last data [\#84](https://github.com/zero-os/0-Disk/pull/84) ([iwanbk](https://github.com/iwanbk))
- fix unit tests reliability and broken deduped redis logic [\#82](https://github.com/zero-os/0-Disk/pull/82) ([GlenDC](https://github.com/GlenDC))
- tlog: replace volume with vdisk [\#79](https://github.com/zero-os/0-Disk/pull/79) ([GlenDC](https://github.com/GlenDC))
- replace isa-l with blake2b\(go\) and go std aes [\#77](https://github.com/zero-os/0-Disk/pull/77) ([GlenDC](https://github.com/GlenDC))
- Tlog : dynamic block length [\#75](https://github.com/zero-os/0-Disk/pull/75) ([iwanbk](https://github.com/iwanbk))
- tlog : get last data example. [\#72](https://github.com/zero-os/0-Disk/pull/72) ([iwanbk](https://github.com/iwanbk))
- move all tlog code under ./tlog \(incl. client\) [\#71](https://github.com/zero-os/0-Disk/pull/71) ([GlenDC](https://github.com/GlenDC))
- merge master into tlogserver [\#68](https://github.com/zero-os/0-Disk/pull/68) ([GlenDC](https://github.com/GlenDC))
- Tlog string volumeid [\#66](https://github.com/zero-os/0-Disk/pull/66) ([iwanbk](https://github.com/iwanbk))
- add support for root \(fallback\) storage [\#64](https://github.com/zero-os/0-Disk/pull/64) ([GlenDC](https://github.com/GlenDC))
- fix \#60: replace volume with vdisk [\#62](https://github.com/zero-os/0-Disk/pull/62) ([GlenDC](https://github.com/GlenDC))
- allow predefined storageclustername [\#61](https://github.com/zero-os/0-Disk/pull/61) ([GlenDC](https://github.com/GlenDC))
- copyvolume command line utility [\#58](https://github.com/zero-os/0-Disk/pull/58) ([GlenDC](https://github.com/GlenDC))
- Fix better logging [\#54](https://github.com/zero-os/0-Disk/pull/54) ([GlenDC](https://github.com/GlenDC))
- WIP: add redisstub, using an embedded ledisdb [\#51](https://github.com/zero-os/0-Disk/pull/51) ([GlenDC](https://github.com/GlenDC))
- add content ref. and gc to dedupedStorage [\#44](https://github.com/zero-os/0-Disk/pull/44) ([GlenDC](https://github.com/GlenDC))

## [v1.1.0-alpha](https://github.com/zero-os/0-Disk/tree/v1.1.0-alpha) (2017-04-11)
**Closed issues:**

- An error during a flush is not propagated to the client [\#43](https://github.com/zero-os/0-Disk/issues/43)
- Deduped volumes do not work with the inmemory storage option [\#41](https://github.com/zero-os/0-Disk/issues/41)
- Support for "cache disks" [\#37](https://github.com/zero-os/0-Disk/issues/37)
- Integrate the grid api instead of the current volume/storagecontroller api's [\#36](https://github.com/zero-os/0-Disk/issues/36)
- get export list from VolumeController [\#35](https://github.com/zero-os/0-Disk/issues/35)
- unblock LBA cached/non-cached flow [\#33](https://github.com/zero-os/0-Disk/issues/33)
- Speed up reading [\#31](https://github.com/zero-os/0-Disk/issues/31)
- Copying a volume fails if it has too much metadata [\#27](https://github.com/zero-os/0-Disk/issues/27)
- add LBA submodule unit tests [\#26](https://github.com/zero-os/0-Disk/issues/26)
- profile and improve LBA structure getting [\#25](https://github.com/zero-os/0-Disk/issues/25)
- Apply changes in the vendor/github.com/g8os/gonbdserver to the imported repo [\#24](https://github.com/zero-os/0-Disk/issues/24)
- nbdserver does not cleanup unix socket [\#23](https://github.com/zero-os/0-Disk/issues/23)
- Support for qemu-img directly to nbd [\#22](https://github.com/zero-os/0-Disk/issues/22)
- Panic when read spans 2 blocks [\#21](https://github.com/zero-os/0-Disk/issues/21)
- Mounting an ext4 filesystem fails [\#20](https://github.com/zero-os/0-Disk/issues/20)
- Support qemu 2.8 [\#19](https://github.com/zero-os/0-Disk/issues/19)
- add CI and ensure generated files are up to date [\#18](https://github.com/zero-os/0-Disk/issues/18)
- make arbd writeAt work on non-boundary offsets [\#16](https://github.com/zero-os/0-Disk/issues/16)
- Handle 'empty' blocks [\#15](https://github.com/zero-os/0-Disk/issues/15)
- remove/hide/modify gonbdserver flags [\#13](https://github.com/zero-os/0-Disk/issues/13)
- Profile LBA Serialization and Improve if needed [\#12](https://github.com/zero-os/0-Disk/issues/12)
- Support for non-deduped volumes [\#10](https://github.com/zero-os/0-Disk/issues/10)
- For a deduped volume, check if the content is already stored before sending it to ARDB [\#9](https://github.com/zero-os/0-Disk/issues/9)
- Limit the LBA cache on a LRU basis [\#8](https://github.com/zero-os/0-Disk/issues/8)
- create Lua scripts to be used as procedures in redis [\#6](https://github.com/zero-os/0-Disk/issues/6)
- make LBA tables persistent [\#5](https://github.com/zero-os/0-Disk/issues/5)
- make config of nbdserver more stateless [\#4](https://github.com/zero-os/0-Disk/issues/4)
- Benchmark testing Capnp RPC vs RAML API [\#2](https://github.com/zero-os/0-Disk/issues/2)
- NBD server in go [\#1](https://github.com/zero-os/0-Disk/issues/1)

**Merged pull requests:**

- reload storageClusterConfig on a SIGHUP [\#48](https://github.com/zero-os/0-Disk/pull/48) ([GlenDC](https://github.com/GlenDC))
- improve speed and resource usage [\#34](https://github.com/zero-os/0-Disk/pull/34) ([GlenDC](https://github.com/GlenDC))
- add support for non deduped \(arbd\) volumes [\#32](https://github.com/zero-os/0-Disk/pull/32) ([GlenDC](https://github.com/GlenDC))
- Stora lba metadata in hset [\#30](https://github.com/zero-os/0-Disk/pull/30) ([grimpy](https://github.com/grimpy))
- Feature CI gen diff test [\#29](https://github.com/zero-os/0-Disk/pull/29) ([GlenDC](https://github.com/GlenDC))
- Refactor LBA and add LRU cache [\#28](https://github.com/zero-os/0-Disk/pull/28) ([GlenDC](https://github.com/GlenDC))
- support writeAt offset neq 0, fixes \#16 [\#17](https://github.com/zero-os/0-Disk/pull/17) ([GlenDC](https://github.com/GlenDC))
- improve runtime of lba serialization [\#14](https://github.com/zero-os/0-Disk/pull/14) ([GlenDC](https://github.com/GlenDC))
- integrate forked nbd server and make export config stateless [\#11](https://github.com/zero-os/0-Disk/pull/11) ([GlenDC](https://github.com/GlenDC))
- add some minor improvements to code/docs [\#7](https://github.com/zero-os/0-Disk/pull/7) ([GlenDC](https://github.com/GlenDC))
- Add missing dependencies to vendor [\#3](https://github.com/zero-os/0-Disk/pull/3) ([GlenDC](https://github.com/GlenDC))



\* *This Change Log was automatically generated by [github_changelog_generator](https://github.com/skywinder/Github-Changelog-Generator)*